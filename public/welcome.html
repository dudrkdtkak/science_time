<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>환영합니다 | 매일 10분 과학</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <!-- 별 배경 (index와 동일) -->
    <div class="star-container"></div>
    <script>
        const container = document.querySelector('.star-container');
        const STAR_COUNT = 2000;
        for (let i = 0; i < STAR_COUNT; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.setProperty('--x', Math.random() * 100 + 'vw');
            star.style.setProperty('--y', (Math.random() * 200 - 50) + 'vh');
            star.style.setProperty('--size', (1 + Math.random() * 3) + 'px');
            star.style.setProperty('--dur', (10 + Math.random() * 5) + 's');
            star.style.setProperty('--delay', (Math.random() * 3) + 's');
            star.style.setProperty('--opa', (0.8 + Math.random() * 0.2));
            container.appendChild(star);
        }
    </script>

    <!-- 환영 박스 -->
    <div class="main-box welcome-box">
        <!-- 1) “홍길동님 환영합니다!” -->
        <h1 id="welcome-title">환영합니다!</h1>

        <!-- 2) 학교·학년·반 정보 한 줄로 -->
        <p id="school-info" class="subtitle">
            학교 정보가 없습니다.
        </p>

        <!-- 3) 선택된 캐릭터 (예시) -->
        <div class="character-container">
            <img id="char-img" src="" alt="탐사 대원 캐릭터" />
        </div>

        <!-- 4) 탐사 시작 버튼 -->
        <div class="btn-group">
            <button id="btn-start" class="btn btn-primary">탐사 시작하기</button>
        </div>
    </div>

    <script type="module">
        // 1) 로컬스토리지에서 프로필(user_profile)과 학교정보(user_data) 불러오기
        const profile = JSON.parse(localStorage.getItem('user_profile') || '{}');
        const data = JSON.parse(localStorage.getItem('user_data') || '{}');

        // 2) 닉네임(이름)만 불러와 제목에 적용
        if (profile.firstName) {
            document.getElementById('welcome-title')
                .textContent = `${profile.firstName}님 환영합니다!`;
        }

        // 3) school_info.js에서 저장한 학교·학년·반을 한 줄로 표시
        const infoEl = document.getElementById('school-info');
        if (data.schoolName && data.grade && data.className) {
            infoEl.textContent =
                `${data.schoolName} · ${data.grade} · ${data.className}`;
        }

        // 4) 선택된 캐릭터 이미지가 있으면 띄워주기
        if (profile.character) {
            document.getElementById('char-img').src = profile.character;
        }

        // 5) '탐사 시작하기' 버튼 클릭 → 메인 페이지(main.html)로 이동
        document.getElementById('btn-start')
                  .addEventListener('click', () => {
                          window.location.href = 'onbording.html';
                      });
    </script>
</body>
</html>
